{% extends "base.html" %}
{% block title %}Admin Panel{% endblock %}
{% block content %}
<h1 class="center">Admin Panel</h1>

<div class="admin-actions center">
    <a href="{{ url_for('add_tool') }}" class="btn primary"><i class="fas fa-plus"></i> Add Tool</a>
    <a href="{{ url_for('add_blog') }}" class="btn primary"><i class="fas fa-plus"></i> Add Blog Post</a>
    <a href="{{ url_for('add_news') }}" class="btn primary"><i class="fas fa-plus"></i> Add News</a>
    <a href="{{ url_for('upload_file') }}" class="btn primary"><i class="fas fa-upload"></i> Upload Files</a>
</div>

<h2>Recent Tools</h2>
{% if tools %}
    <table class="admin-table">
        <thead>
            <tr>
                <th>Title</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for tool in tools %}
            <tr>
                <td>{{ tool.title }}</td>
                <td>{{ tool.date_posted.strftime('%d/%m/%Y') }}</td>
                <td>
                    <a href="{{ url_for('edit_tool', id=tool.id) }}" class="btn small"><i class="fas fa-edit"></i> Edit</a>
                    <a href="{{ url_for('delete_tool', id=tool.id) }}" class="btn small danger" onclick="return confirm('Delete this tool?')"><i class="fas fa-trash"></i> Delete</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No tools yet.</p>
{% endif %}

<h2>Recent Blog Posts</h2>
{% if posts %}
    <table class="admin-table">
        <thead>
            <tr>
                <th>Title</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for post in posts %}
            <tr>
                <td>{{ post.title }}</td>
                <td>{{ post.date_posted.strftime('%d/%m/%Y') }}</td>
                <td>
                    <a href="{{ url_for('edit_blog', id=post.id) }}" class="btn small"><i class="fas fa-edit"></i> Edit</a>
                    <a href="{{ url_for('delete_blog', id=post.id) }}" class="btn small danger" onclick="return confirm('Delete this post?')"><i class="fas fa-trash"></i> Delete</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No blog posts yet.</p>
{% endif %}

<h2>Recent News</h2>
{% if news %}
    <table class="admin-table">
        <thead>
            <tr>
                <th>Title</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for item in news %}
            <tr>
                <td>{{ item.title }}</td>
                <td>{{ item.date_posted.strftime('%d/%m/%Y') }}</td>
                <td>
                    <a href="{{ url_for('edit_news', id=item.id) }}" class="btn small"><i class="fas fa-edit"></i> Edit</a>
                    <a href="{{ url_for('delete_news', id=item.id) }}" class="btn small danger" onclick="return confirm('Delete this news?')"><i class="fas fa-trash"></i> Delete</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No news yet.</p>
{% endif %}

<h2>Recent Uploaded Files</h2>
{% if files %}
    <table class="admin-table">
        <thead>
            <tr>
                <th>Filename</th>
                <th>Size</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for file in files %}
            <tr>
                <td>{{ file.filename }}</td>
                <td>{{ (file.size/1024)|round }} KB</td>
                <td>
                    <a href="{{ url_for('delete_file', id=file.id) }}" class="btn small danger" onclick="return confirm('Delete this file?')"><i class="fas fa-trash"></i> Delete</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No files uploaded yet.</p>
{% endif %}
{% endblock %}
