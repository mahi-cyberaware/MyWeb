{% extends "base.html" %}
{% block title %}Admin Panel{% endblock %}
{% block content %}
<h1 class="center">Admin Panel</h1>

<div class="admin-actions center">
    <a href="{{ url_for('add_tool') }}" class="btn primary">+ Add Tool</a>
    <a href="{{ url_for('add_blog') }}" class="btn primary">+ Add Blog Post</a>
    <a href="{{ url_for('add_news') }}" class="btn primary">+ Add News</a>
    <a href="{{ url_for('upload_file') }}" class="btn primary">Upload Files</a>
</div>

<h2>Recent Tools</h2>
<div class="admin-cards">
    {% if tools %}
        {% for tool in tools %}
        <div class="admin-card">
            <h3>{{ tool.title }}</h3>
            <p class="admin-date">{{ tool.date_posted.strftime('%d/%m/%Y') }}</p>
            <div class="admin-actions">
                <a href="{{ url_for('edit_tool', id=tool.id) }}" class="btn small">Edit</a>
                <a href="{{ url_for('delete_tool', id=tool.id) }}" class="btn small danger" onclick="return confirm('Delete this tool?')">Delete</a>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No tools yet.</p>
    {% endif %}
</div>

<h2>Recent Blog Posts</h2>
<div class="admin-cards">
    {% if posts %}
        {% for post in posts %}
        <div class="admin-card">
            <h3>{{ post.title }}</h3>
            <p class="admin-date">{{ post.date_posted.strftime('%d/%m/%Y') }}</p>
            <div class="admin-actions">
                <a href="{{ url_for('edit_blog', id=post.id) }}" class="btn small">Edit</a>
                <a href="{{ url_for('delete_blog', id=post.id) }}" class="btn small danger" onclick="return confirm('Delete this post?')">Delete</a>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No blog posts yet.</p>
    {% endif %}
</div>

<h2>Recent News</h2>
<div class="admin-cards">
    {% if news %}
        {% for item in news %}
        <div class="admin-card">
            <h3>{{ item.title }}</h3>
            <p class="admin-date">{{ item.date_posted.strftime('%d/%m/%Y') }}</p>
            <div class="admin-actions">
                <a href="{{ url_for('edit_news', id=item.id) }}" class="btn small">Edit</a>
                <a href="{{ url_for('delete_news', id=item.id) }}" class="btn small danger" onclick="return confirm('Delete this news?')">Delete</a>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No news yet.</p>
    {% endif %}
</div>

<h2>Recent Uploaded Files</h2>
<div class="admin-cards">
    {% if files %}
        {% for file in files %}
        <div class="admin-card">
            <h3>{{ file.filename }}</h3>
            <p class="admin-date">{{ (file.size/1024)|round }} KB</p>
            <div class="admin-actions">
                <a href="{{ url_for('delete_file', id=file.id) }}" class="btn small danger" onclick="return confirm('Delete this file?')">Delete</a>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No files uploaded yet.</p>
    {% endif %}
</div>

<style>
.admin-cards {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
    margin: 1rem 0 2rem;
}
.admin-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    padding: 1rem;
    box-shadow: var(--card-shadow);
}
.admin-card h3 {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    color: var(--accent);
}
.admin-date {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: 1rem;
}
.admin-card .admin-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
}
@media (max-width: 1024px) {
    .admin-cards { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 768px) {
    .admin-cards { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 480px) {
    .admin-cards { grid-template-columns: 1fr; }
}
</style>
{% endblock %}
