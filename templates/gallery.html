{% extends "base.html" %}
{% block title %}Media Gallery{% endblock %}
{% block content %}
<h1 class="center">Media Gallery</h1>

<div class="gallery-container">
    <div class="gallery-tabs">
        <button class="tab active" data-tab="images">Images</button>
        <button class="tab" data-tab="videos">Videos</button>
        <button class="tab" data-tab="code">Code Files</button>
    </div>

    <div class="gallery-content">
        <!-- Images Tab -->
        <div class="tab-pane active" id="images">
            {% if images %}
                <div class="file-grid">
                {% for file in images %}
                    <div class="file-card">
                        <img src="{{ file.stored_filename }}" alt="{{ file.filename }}">
                        <div class="file-info">
                            <div class="file-name">{{ file.filename }}</div>
                            <div class="file-meta">{{ (file.size/1024)|round }} KB</div>
                            {% if file.description %}<div class="file-description">{{ file.description }}</div>{% endif %}
                            <a href="{{ file.stored_filename }}" target="_blank" download class="download-btn">Download</a>
                        </div>
                    </div>
                {% endfor %}
                </div>
            {% else %}
                <p class="center">No images found.</p>
            {% endif %}
        </div>

        <!-- Videos Tab -->
        <div class="tab-pane" id="videos">
            {% if videos %}
                <div class="file-grid">
                {% for file in videos %}
                    <div class="file-card">
                        <video controls>
                            <source src="{{ file.stored_filename }}" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <div class="file-info">
                            <div class="file-name">{{ file.filename }}</div>
                            <div class="file-meta">{{ (file.size/1024)|round }} KB</div>
                            {% if file.description %}<div class="file-description">{{ file.description }}</div>{% endif %}
                            <a href="{{ file.stored_filename }}" target="_blank" download class="download-btn">Download</a>
                        </div>
                    </div>
                {% endfor %}
                </div>
            {% else %}
                <p class="center">No videos found.</p>
            {% endif %}
        </div>

        <!-- Code Files Tab -->
        <div class="tab-pane" id="code">
            {% if code_files %}
                <div class="file-grid">
                {% for file in code_files %}
                    <div class="file-card">
                        <div class="file-info">
                            <div class="file-name">{{ file.filename }}</div>
                            <div class="file-meta">{{ (file.size/1024)|round }} KB</div>
                            {% if file.description %}<div class="file-description">{{ file.description }}</div>{% endif %}
                            <a href="{{ file.stored_filename }}" target="_blank" download class="download-btn">Download</a>
                        </div>
                    </div>
                {% endfor %}
                </div>
            {% else %}
                <p class="center">No code files found.</p>
            {% endif %}
        </div>
    </div>
</div>

<!-- Pagination (simplified) -->
{% if images_pagination and images_pagination.pages > 1 %}
<div class="pagination">
    {% if images_pagination.has_prev %}
        <a href="{{ url_for('gallery', page=images_pagination.prev_num) }}">&laquo; Previous</a>
    {% endif %}
    ...
</div>
{% endif %}

<script>
document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
        document.getElementById(tab.dataset.tab).classList.add('active');
    });
});
</script>
{% endblock %}
