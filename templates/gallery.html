{% extends "base.html" %}
{% block title %}Media Gallery{% endblock %}
{% block content %}
<h1 class="center">Media Gallery</h1>

<div class="gallery-tabs centered">
    <button class="tab {% if active_tab == 'images' or not active_tab %}active{% endif %}" data-tab="images">Images</button>
    <button class="tab {% if active_tab == 'videos' %}active{% endif %}" data-tab="videos">Videos</button>
    <button class="tab {% if active_tab == 'code' %}active{% endif %}" data-tab="code">Code Files</button>
</div>

<div class="gallery-content">
    <!-- Images Tab -->
    <div class="tab-pane {% if active_tab == 'images' or not active_tab %}active{% endif %}" id="images">
        {% if images %}
            <div class="file-grid">
            {% for file in images %}
                <div class="file-card">
                    <img src="{{ file.stored_filename }}" alt="{{ file.filename }}">
                    <div class="file-info">
                        <div class="file-name">{{ file.filename }}</div>
                        <div class="file-meta">{{ (file.size/1024)|round }} KB</div>
                        {% if file.description %}<div class="file-description">{{ file.description }}</div>{% endif %}
                        <a href="{{ file.stored_filename }}" target="_blank" download class="download-btn">Download</a>
                    </div>
                </div>
            {% endfor %}
            </div>
        {% else %}
            <p class="center">No images found.</p>
        {% endif %}
    </div>

    <!-- Videos Tab -->
    <div class="tab-pane {% if active_tab == 'videos' %}active{% endif %}" id="videos">
        {% if videos %}
            <div class="file-grid">
            {% for file in videos %}
                <div class="file-card">
                    <video controls>
                        <source src="{{ file.stored_filename }}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <div class="file-info">
                        <div class="file-name">{{ file.filename }}</div>
                        <div class="file-meta">{{ (file.size/1024)|round }} KB</div>
                        {% if file.description %}<div class="file-description">{{ file.description }}</div>{% endif %}
                        <a href="{{ file.stored_filename }}" target="_blank" download class="download-btn">Download</a>
                    </div>
                </div>
            {% endfor %}
            </div>
        {% else %}
            <p class="center">No videos found.</p>
        {% endif %}
    </div>

    <!-- Code Files Tab -->
    <div class="tab-pane {% if active_tab == 'code' %}active{% endif %}" id="code">
        {% if code_files %}
            <div class="file-grid">
            {% for file in code_files %}
                <div class="file-card">
                    <div class="file-info">
                        <div class="file-name">{{ file.filename }}</div>
                        <div class="file-meta">{{ (file.size/1024)|round }} KB</div>
                        {% if file.description %}<div class="file-description">{{ file.description }}</div>{% endif %}
                        <a href="{{ file.stored_filename }}" target="_blank" download class="download-btn">Download</a>
                    </div>
                </div>
            {% endfor %}
            </div>
        {% else %}
            <p class="center">No code files found.</p>
        {% endif %}
    </div>
</div>

<script>
document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
        document.getElementById(tab.dataset.tab).classList.add('active');
    });
});
</script>
{% endblock %}
